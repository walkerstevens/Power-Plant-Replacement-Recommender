<div id="sidebar-container">
    <mat-card>
        <mat-card-title>Controls</mat-card-title>
        <mat-divider inset></mat-divider>
        <mat-card-content>
            <label>Power Plant Filter</label>
            <mat-form-field appearance="fill">
                <mat-label>Power Plant Filter</mat-label>
                <mat-select [formControl]="fuelFilterFormControl" #fuelselect multiple>
                    <mat-select-trigger>
                        {{fuelFilterFormControl.value ? fuelFilterFormControl.value[0] : ''}}
                        <span *ngIf="fuelFilterFormControl.value?.length > 1">
                            (+{{fuelFilterFormControl.value.length - 1}} {{fuelFilterFormControl.value?.length === 2 ?
                            'other' :
                            'others'}})
                        </span>
                    </mat-select-trigger>
                    <div class="select-all">
                        <mat-checkbox [(ngModel)]="fuelAllSelected" [ngModelOptions]="{standalone: true}"
                            (change)="fuelOptionToggleAllSelection()">Select All</mat-checkbox>
                    </div>
                    <mat-option *ngFor="let primaryFuel of mainServiceService.allFuels" [value]="primaryFuel"
                        (click)="fuelOptionClick()">{{primaryFuel}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </mat-card-content>
    </mat-card>

    <mat-card>
        <mat-card-title>Power Plant Info</mat-card-title>
        <mat-divider inset></mat-divider>
        <mat-card-content>
            <div *ngIf="mainServiceService.selectedPowerPlant$ | async as powerPlantInfo; else loading">
                <ng-container *ngFor="let item of powerPlantInfo | keyvalue">
                    <label>{{item.key}}</label>
                    <p>
                        {{item.value}}
                    </p>
                </ng-container>
                <mat-divider inset></mat-divider>
                <form>
                    <div>
                        <span>Search Grid Size: {{radius}} km x {{radius}} km </span>
                    </div>
                    <mat-slider

                        tickInterval="50"
                        step="5"
                        min="10"
                        max="100"
                        aria-label="units"
                        value="50"
                        (change)="radiusChange($event)"
                        style="width: 100%;">
                    </mat-slider>
                    <button mat-flat-button class="compute-button" color="primary" (click)="computeRenewableAlternativesClick()">Compute Renewable Alternatives</button>
                </form>
            </div>
            <ng-template #loading>
                Select a power plant for data
            </ng-template>
        </mat-card-content>
    </mat-card>
    
    <!--TODO: Edit this to recommend power plants-->
    <mat-card>
        <mat-card-title>Plant Recommendation</mat-card-title>
        <mat-divider inset></mat-divider>
        <mat-card-content>
            <div *ngIf="mainServiceService.selectedPowerPlant$ | async as powerPlantInfo; else loadingRec">
                <label>TODO: Add recommended plant</label>
            </div>
            <ng-template #loadingRec>
                Select a power plant for recommendation
            </ng-template>
        </mat-card-content>
    </mat-card>
</div>
